---
name: 分镜提示词优化（连续性与剧情完整性）
description: 优化分镜提示词，保证镜头间连续性、剧情完整性（对白推动/视频中的文字）、运镜自然不突兀，并根据战斗/大场面触发动态运镜。适用于分镜脚本、AI视频/动画生成、漫画分镜设计。
---

# 分镜提示词优化技能（连续性与剧情完整性）

此技能用于优化分镜提示词，重点保证**镜头间连续性**与**剧情完整性**，并对**对白/画内文字**与**运镜触发条件**进行约束，避免运镜突兀、出戏。

## 何时使用此技能

**触发条件：**
- 用户需要“优化分镜提示词”或“保证镜头连贯/剧情完整”
- 用户强调对白推动剧情、画面文字提示
- 用户反馈运镜突兀、出戏
- 分镜输出来自AI生成但缺乏连续性或叙事闭环

**此技能的功能：**
- 保证镜头时空与动作连续性（轴线、视线、方向、动作匹配）
- 完整补全叙事链条（起因 → 过程 → 结果）
- 约束对白与画内文字使用（对白推动、字幕补位）
- 运镜触发规则化（战斗/大场面才允许激烈运镜）

## 输入格式

接受以下输入：
- **分镜数组**（推荐）：完整场景的镜头序列
- **单镜头信息**：可用于局部优化，但仍需前后镜头上下文

**必需字段：**
- `shot_id`
- `scene_number`
- `shot_type`
- `location`
- `characters`（含 action/expression）
- `editing`（purpose/pacing）

**可选但有帮助：**
- `composition`（camera_position/movement/framing/focus）
- `audio`（dialogue/internal_monologue/narration）
- `visual_effects`
- `duration`

## 输出格式

输出优化后的分镜序列与连续性报告：

```json
{
  "optimized_storyboard": [
    {
      "shot_id": "EP01-S001",
      "continuity_tags": ["establishing", "axis_locked", "screen_direction_L2R"],
      "optimized_prompt": "…",
      "composition": { "camera_position": "...", "camera_movement": "...", "framing": "...", "focus_type": "..." },
      "audio": { "dialogue": "...", "narration": "...", "sound_effects": ["..."] },
      "on_screen_text": { "text": "...", "duration_sec": 2, "position": "bottom-center", "style": "简洁白字+黑描边" }
    }
  ],
  "continuity_report": {
    "issues_found": ["轴线跳跃", "动作不连贯"],
    "fixes_applied": ["锁定视线方向", "增加过渡镜头"]
  },
  "dialogue_text_plan": {
    "dialogue_drives_plot": true,
    "text_usage_policy": "仅在时间地点/系统提示/必要信息时使用"
  },
  "camera_movement_policy": {
    "allowed_fast_moves": "仅战斗/大场面/追逐/灾难",
    "default_moves": "固定镜头/缓慢推拉/小幅摇移"
  }
}
```

## 连续性优化指南

### 1) 时空连续性
- **时间一致**：同一场景内避免光照/天气跳变
- **空间一致**：同一场景需保持地理方位与主体位置稳定
- **建立镜头**：每个场景开始必须有建立镜头（全景/远景）

### 2) 动作连续性
- **动作衔接**：前一镜头的动作必须在后一镜头中延续或收束
- **切点原则**：优先“切在动作中”，避免动作中断
- **关键动作补镜**：缺少过渡时，补充中景/手部/道具特写

### 3) 视线与方向
- **180度规则**：对话场景锁定轴线，不随意跳轴
- **视线一致**：A看右，B应看左（除非故意制造不安）
- **屏幕方向一致**：人物移动方向保持一致（L→R 或 R→L）

### 4) 道具/服装/伤势连续
- 关键道具、服饰细节、伤痕状态必须在镜头间保持一致
- 若有变化，必须用镜头或对白交代

## 剧情完整性优化指南

### 1) 起因 → 过程 → 结果（每场景闭环）
- **起因**：冲突/任务/信息输入
- **过程**：行动/对话/对抗
- **结果**：信息更新/局势变化/悬念抛出

### 2) 对白推动剧情
- 每个关键剧情推进必须由**对白或行动**触发
- 对白应包含：冲突、决策、信息揭示或情绪转折
- 避免纯“解释型对白”堆砌，优先行动引发对白

### 2.1) 无对白镜头的旁白补位
- 若镜头没有对白且承担**转场/时间跳切/情绪过渡**功能，应补一句简短旁白
- 旁白应短促明确（1句为宜），不复述画面已表达的信息
- 若画面已足够清楚，可不加旁白，避免“说教感”

### 3) 画内文字使用规则
**允许使用场景：**
- 时间/地点提示（仅首次出现）
- 系统提示/规则提示
- 关键物品名称（短促出现）

**限制：**
- 单条文字建议 ≤ 12-16 字
- 出现时长 1.5-3 秒
- 位置固定（底部居中或右下角）
- 同一信息不重复出现

## 运镜优化与触发条件

### 默认运镜（常态）
适用于：日常对话、情感细节、解释性场景  
**推荐：**
- 固定镜头
- 缓慢推近/拉远
- 小幅摇移（≤10-15度）

### 动态运镜（触发条件）
仅在以下条件触发：
- **战斗/追逐**
- **大场面/群像/灾难**
- **强冲突/爆点/视觉奇观**

**允许的运镜：**
- 快速推拉
- 环绕/跟随
- 手持抖动/轻微震动
- 速度变化（快 → 慢）

### 禁止突兀运镜
- 日常对白场景禁止突然快速推拉或强烈抖动
- 禁止无动机的360度环绕
- 禁止随意跳轴导致视线/方向错误
- 禁止频繁变更镜头高度/焦段造成“闪断感”
- 禁止无明确动机的倾斜镜头（Dutch tilt）

## 转场与衔接规则

- **节奏匹配**：剪辑节奏需与镜头运动速度一致
- **动作剪接**：优先“切在动作中”制造顺滑感
- **情绪缓冲**：重大情绪变化前添加过渡镜头
- **场景切换**：跨时空切换需用文字或镜头语言提示

## 优化流程（建议）

1. 读取完整场景的分镜序列
2. 标注镜头功能（建立/对话/动作/高潮/收束）
3. 检查时空与动作连续性
4. 校验对白是否推动剧情
5. 规范画内文字使用
6. 应用运镜触发规则，调整突兀运镜
7. 输出连续性报告与优化结果

## 质量检查清单

- [ ] 场景有建立镜头，且时空一致
- [ ] 视线方向与屏幕方向一致（未跳轴）
- [ ] 动作衔接顺畅，切点合理
- [ ] 对白/行动能推动剧情
- [ ] 画内文字使用合理且简洁
- [ ] 运镜与情绪、节奏匹配
- [ ] 仅在战斗/大场面使用激烈运镜
- [ ] 无突兀的镜头运动或视角跳变

## 使用提示

- 小场景优先“稳”，大场景才“动”
- 多对白场景保持镜头稳定，靠表演推进
- 关键信息优先放在对白或动作里，文字仅做提示

--- 

**记住：**好分镜的核心是“连贯、清楚、可信”，运镜只是服务叙事的手段，而非目的。
